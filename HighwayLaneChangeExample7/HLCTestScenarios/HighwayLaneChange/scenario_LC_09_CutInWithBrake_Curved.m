function [scenario, egoVehicle, roadCenters] = scenario_LC_09_CutInWithBrake_Curved()
% scenario_LC_09_CutInWithBreak_Curved creates a scenario that is
% compatible with HighwayLaneChangeTestBench.slx. This test scenario is on
% a Curved road.There are two other vehicles in the scenario. One vehicle
% travels in the right lane. Other vehicle cuts into the ego lane from the
% right lane and slows down. Ego car initiates lane change to avoid these
% vehicles.
%
% This scenario is created in Driving Scenario Designer and exported as a
% MATLAB function.

%   Copyright 2019-2021 The MathWorks, Inc.

% Construct a drivingScenario object.
scenario = drivingScenario('StopTime', 20, ...
    'SampleTime', 0.1);

% Add all road segments
% Road centers for curved road
roadCenters = [56.13473 823.0072 0;
    64.82858 835.2291 0;
    74.02602 847.0774 0;
    83.59856 858.6252 0;
    93.42604 869.9573 0;
    103.3945 881.1657 0;
    113.3935 892.3469 0;
    123.3135 903.5982 0;
    133.109 914.958 0;
    142.7657 926.436 0;
    152.2333 938.0704 0;
    161.4594 949.897 0;
    170.3894 961.9486 0;
    178.9662 974.2539 0;
    187.1295 986.8371 0;
    194.8161 999.7168 0;
    201.9599 1012.905 0;
    208.4868 1026.409 0;
    214.3176 1040.228 0;
    219.4598 1054.317 0;
    223.9383 1068.632 0;
    227.7812 1083.13 0;
    231.0193 1097.775 0;
    233.6855 1112.535 0;
    235.8145 1127.383 0;
    237.4425 1142.293 0;
    238.6067 1157.248 0;
    239.3451 1172.229 0;
    239.6962 1187.224 0;
    239.699 1202.224 0;
    239.3926 1217.221 0;
    238.8163 1232.21 0;
    238.0094 1247.188 0;
    236.9962 1262.153 0;
    235.7453 1277.101 0;
    234.2127 1292.022 0;
    232.355 1306.906 0;
    230.1291 1321.74 0;
    227.4926 1336.506 0;
    224.4042 1351.184 0;
    220.8236 1365.749 0;
    216.7121 1380.174 0;
    212.0332 1394.424 0;
    206.7524 1408.463 0;
    200.8386 1422.246 0;
    194.264 1435.727 0;
    187.0053 1448.852 0;
    179.0441 1461.562 0;
    170.377 1473.802 0;
    161.0515 1485.549 0;
    151.1278 1496.795 0;
    140.6637 1507.54 0;
    129.7137 1517.79 0;
    118.3291 1527.555 0;
    106.5581 1536.851 0;
    94.44532 1545.697 0;
    82.03201 1554.117 0;
    69.35616 1562.136 0;
    56.45259 1569.783 0;
    43.35309 1577.09 0;
    30.08552 1584.088 0;
    16.65799 1590.773 0;
    3.065769 1597.116 0;
    -10.69412 1603.087 0;
    -24.62235 1608.654 0;
    -38.71708 1613.784 0;
    -52.97377 1618.445 0;
    -67.38492 1622.604 0;
    -81.93995 1626.226 0;
    -96.6249 1629.28 0;
    -111.4223 1631.73 0;
    -126.311 1633.544 0;
    -141.2659 1634.689 0;
    -156.2578 1635.135 0;
    -171.2536 1634.85 0;
    -186.2155 1633.806 0;
    -201.1029 1631.985 0;
    -215.8802 1629.418 0;
    -230.5201 1626.157 0;
    -245.0015 1622.251 0;
    -259.3093 1617.751 0;
    -273.4343 1612.705 0;
    -287.372 1607.163 0;
    -301.1227 1601.171 0;
    -314.6911 1594.777 0;
    -328.0853 1588.025 0;
    -341.3169 1580.96 0;
    -354.4003 1573.624 0;
    -367.3525 1566.059 0;
    -380.1923 1558.304 0;
    -392.9405 1550.4 0];
laneSpecification = lanespec(4);
curvedRoad = road(scenario, roadCenters, 'Lanes', laneSpecification);

% Add the ego vehicle
egoVehicle = vehicle(scenario, ...
    'ClassID', 1, ...
    'Length', 3.864, ...
    'Width', 1.653, ...
    'Height', 1.513, ...
    'Position', [125.231639292804 908.549869344559 0], ...
    'RearOverhang', 0.589, ...
    'FrontOverhang', 0.828, ...
    'Wheelbase', 2.447);
waypoints = [125.231639292804 908.549869344559 0;
    126.537626695375 910.060979611049 0;
    127.841323623575 911.574084748432 0;
    129.142738724442 913.089171240076 0;
    130.441880696077 914.606225617601 0;
    131.738737938926 916.125210554625 0;
    133.033211627804 917.646039533078 0;
    134.325157994588 919.168787482976 0;
    135.614426596912 920.693575035368 0;
    136.900866408316 922.220522038524 0;
    138.184325784888 923.749747513104 0;
    139.464652432314 925.281369607017 0;
    140.741694038558 926.815506352646 0;
    142.015313031441 928.352291747292 0;
    143.285391431933 929.891841990502 0;
    144.551816476947 931.434237945627 0;
    145.814475059319 932.979558168588 0;
    147.073253488331 934.527880419197 0;
    148.328037475599 936.079281636217 0;
    149.578712121242 937.633837912224 0;
    150.82516047801 939.191622680628 0;
    152.067258747162 940.75270467354 0;
    153.304878828024 942.317163293582 0;
    154.537891327485 943.885080251985 0;
    155.766166096763 945.456536172992 0;
    156.989572216144 947.031610561763 0;
    158.207977980157 948.610381771994 0;
    159.421250945381 950.192927054912 0;
    160.629259303322 951.779324174009 0;
    161.831872480314 953.369648082749 0;
    163.028959796979 954.963969116987 0;
    164.220389782071 956.56235619222 0;
    165.406030133364 958.164876921796 0;
    166.585747707359 959.7715975847 0;
    167.759408509514 961.382583093051 0;
    168.926877421014 962.997896591089 0;
    170.088017264027 964.617598972956 0;
    171.24268914717 966.241751920556 0;
    172.39075313244 967.870416246935 0;
    173.532068369668 969.503651200105 0;
    174.666493089594 971.141514427548 0;
    175.793884597559 972.784061940435 0;
    176.914099284266 974.431348101892 0;
    178.026992989311 976.083426085377 0;
    179.132421225757 977.740346909756 0;
    180.230238829769 979.402158873852 0;
    181.320299712484 981.06890843267 0;
    182.402456847408 982.740640203018 0;
    183.476562269126 984.417396926328 0;
    184.542467072753 986.099219431194 0;
    185.600021327616 987.78614645608 0;
    186.64907375432 989.478214424033 0;
    187.689471779331 991.175458525671 0;
    188.721061819263 992.877912108745 0;
    189.743689351628 994.585606401714 0;
    190.757198918931 996.29857047417 0;
    191.761434133623 998.016831197003 0;
    192.756237738627 999.740413298316 0;
    193.741452857286 1001.46934128941 0;
    194.716924119968 1003.20363600923 0;
    195.682496531016 1004.94331249713 0;
    196.638014301461 1006.68838332336 0;
    197.583320807621 1008.43885870819 0;
    198.518258602614 1010.19474648333 0;
    199.442669428789 1011.95605205321 0;
    200.356387136526 1013.72276443024 0;
    201.259208656869 1015.49483595297 0;
    202.150890146406 1017.27228855325 0;
    203.031177977127 1019.0551616549 0;
    203.89981696654 1020.84349023064 0;
    204.756550393679 1022.6373046975 0;
    205.601120018041 1024.43663081166 0;
    206.43326902563 1026.24149602301 0;
    207.252809363482 1028.05206211757 0;
    208.059712768671 1029.86841447748 0;
    208.854051409431 1031.69042335852 0;
    209.635903376135 1033.51795147144 0;
    210.405348410616 1035.35086366986 0;
    211.162467865512 1037.18902694621 0;
    211.907344664178 1039.03231042685 0;
    212.640060615118 1040.88057856176 0;
    213.360683832675 1042.73368033765 0;
    214.069261903657 1044.59149850656 0;
    214.765838651145 1046.45392683905 0;
    215.450458952468 1048.32086035115 0;
    216.123168718579 1050.19219530579 0;
    216.784014873614 1052.06782921382 0;
    217.433045445338 1053.94766116205 0;
    218.07031217327 1055.83159855992 0;
    218.695875920999 1057.7195473603 0;
    219.309804421961 1059.61140505229 0;
    219.912166679381 1061.50707024211 0;
    220.503032690901 1063.40644309695 0;
    221.082473424352 1065.30942534075 0;
    221.650560793871 1067.21592024951 0;
    222.207367311835 1069.12583150836 0;
    222.480165755478 1070.08244639395 0;
    229.466974206649 1120.70389186009 0;
    229.675389128544 1122.17041355455 0];
speed = 20;
trajectory(egoVehicle, waypoints, speed);

% Add the non-ego actors
car1 = vehicle(scenario, ...
    'ClassID', 1, ...
    'Length', 3.864, ...
    'Width', 1.653, ...
    'Height', 1.513, ...
    'Position', [165.956687281517 952.867973943898 0], ...
    'RearOverhang', 0.589, ...
    'FrontOverhang', 0.828, ...
    'Wheelbase', 2.447);
waypoints = [165.956687281517 952.867973943898 0;
    168.30784711239 956.034276485243 0;
    169.495462021653 957.651795091733 0;
    170.677135940488 959.27382359075 0;
    171.852731712819 960.900427482109 0;
    173.022111623759 962.531672251283 0;
    174.185134570498 964.167621999182 0;
    175.341657809676 965.808339239191 0;
    176.491537620869 967.453884932649 0;
    177.634629299091 969.104318452226 0;
    178.770787147926 970.759697544971 0;
    179.899864456881 972.420078270666 0;
    181.021713181509 974.085514433066 0;
    182.136184904077 975.756057675596 0;
    183.243131189388 977.431757993486 0;
    184.342402642362 979.11266359083 0;
    185.433848862166 980.798820836325 0;
    186.517318440394 982.49027422476 0;
    187.592658959988 984.187066338199 0;
    188.659717081429 985.8892379464 0;
    189.718338556741 987.59682834653 0;
    190.768367238664 989.309874769713 0;
    191.809645722868 991.028412319506 0;
    192.842015593277 992.752473973244 0;
    193.86531742569 994.482090540909 0;
    194.87939079225 996.217290623712 0;
    195.884074212112 997.958100476408 0;
    196.879204128047 999.704541877907 0;
    197.864618513794 1001.4566328601 0;
    198.840158086196 1003.21438985486 0;
    199.805662807955 1004.97782699885 0;
    200.760971736106 1006.7469560583 0;
    201.705923033207 1008.52178638879 0;
    202.640353979462 1010.30232489482 0;
    203.102231029905 1011.19545740486 0;
    219.460394986316 1060.08532134975 0;
    219.912166679381 1061.50707024211 0;
    220.503032690901 1063.40644309695 0;
    221.082473424352 1065.30942534075 0;
    221.650560793871 1067.21592024951 0;
    222.207367311835 1069.12583150836 0;
    222.752964199121 1071.03906127954 0;
    223.287419523484 1072.95551804559 0;
    223.810801239769 1074.87511319304 0;
    224.323178098857 1076.7977595044 0;
    224.824619627803 1078.72337115337 0;
    224.988145121954 1079.3662020022 0;
    234.732384132657 1267.98667403449 0];
speed = [18;18;18;18;18;18;18;18;18;18;18;18;18;18;18;18;18;18;18;18;18;18;18;18;18;18;18;18;18;18;18;18;18;18;18;18;18;18;18;18;18;18;18;18;18;18;10;10];
trajectory(car1, waypoints, speed);

car2 = vehicle(scenario, ...
    'ClassID', 1, ...
    'Length', 4.848, ...
    'Width', 1.842, ...
    'Height', 1.517, ...
    'Position', [219.178419754845 1048.04951546438 0], ...
    'RearOverhang', 1.119, ...
    'FrontOverhang', 0.911, ...
    'Wheelbase', 2.818);
waypoints = [219.178419754845 1048.04951546438 0;
    219.518603929148 1048.99594293659 0;
    220.186924857632 1050.89300852935 0;
    220.843248453595 1052.79418145157 0;
    221.48762376645 1054.6993523521 0;
    222.120109348676 1056.60841036029 0;
    222.740775571123 1058.5212504882 0;
    223.349694286581 1060.43776955954 0;
    223.946938333982 1062.3578660032 0;
    224.53258151357 1064.28143984829 0;
    225.106698562417 1066.20839271895 0;
    225.669365454797 1068.13862896677 0;
    226.220658714947 1070.07205830906 0;
    226.760649625812 1072.0085900355 0;
    227.289408687546 1073.94813410791 0;
    227.807007187301 1075.89060192023 0;
    228.313517178908 1077.83590629328 0;
    228.809011462847 1079.78396146918 0;
    229.293563554751 1081.73468305712 0;
    229.767247480284 1083.68798699619 0;
    230.230139217283 1085.6437903326 0;
    230.682316921571 1087.60201230649 0;
    231.123859474064 1089.56257362577 0;
    231.554846396533 1091.52539642331 0;
    231.975357833006 1093.49040424919 0;
    232.385474531482 1095.45752206271 0;
    232.785277872666 1097.42667646052 0;
    233.174849674325 1099.39779619297 0;
    233.554271102199 1101.37081088607 0;
    233.923623542236 1103.34565133461 0;
    234.282988893618 1105.32224967556 0;
    234.632449552622 1107.30053937938 0;
    234.972088396762 1109.28045524108 0;
    235.301988759652 1111.26193331175 0;
    235.622234288384 1113.2449096351 0;
    235.932910605579 1115.22932131416 0;
    236.234105487486 1117.21510783115 0;
    236.525907197477 1119.20221003911 0;
    236.80840439632 1121.19057010293 0;
    237.081686127792 1123.18013148848 0;
    237.345841804581 1125.17083895166 0;
    237.600961269976 1127.16263913823 0;
    237.847134237232 1129.15548187875 0;
    238.084447778384 1131.14931674493 0;
    238.312988519802 1133.14409397661 0;
    238.532843386021 1135.13976499366 0;
    238.744099587979 1137.13628238541 0;
    238.946844611504 1139.1335998999 0;
    239.141166199735 1141.13167236498 0;
    239.32715229236 1143.13045424358 0;
    239.504892833494 1145.12990097203 0;
    239.674479880762 1147.12997046803 0;
    239.836005797069 1149.1306218575 0;
    239.989563158705 1151.13181540182 0;
    240.135244745187 1153.13351248547 0;
    240.273143529356 1155.13567560364 0;
    240.403352692772 1157.13826875861 0;
    240.525965201299 1159.14125829235 0;
    240.641072278739 1161.14461049363 0;
    240.748764823818 1163.14829230262 0;
    240.849133882186 1165.1522716774 0;
    240.942270638281 1167.15651758191 0;
    241.028266407425 1169.16099997384 0;
    241.107212626992 1171.16568976038 0;
    241.17920086331 1173.17055811142 0;
    241.244323620793 1175.17557712836 0;
    241.302674352371 1177.18072054694 0;
    241.354346642376 1179.18596308316 0;
    241.399434163139 1181.19128038984 0;
    241.438030668499 1183.19664904365 0;
    241.470229987521 1185.20204653228 0;
    241.496126019656 1187.20745136546 0;
    241.515812590794 1189.21284331069 0;
    241.529383026594 1191.21820263808 0;
    241.536930566102 1193.22351034749 0;
    241.538548495544 1195.22874827738 0;
    241.534330143323 1197.23389909205 0;
    241.524368875205 1199.23894626867 0;
    241.508758089728 1201.24387408086 0;
    241.487591218775 1203.2486675108 0;
    241.46096181039 1205.25331231618 0;
    241.428963523135 1207.25779509655 0;
    241.39169003548 1209.26210320482 0;
    241.349235038135 1211.26622473058 0;
    241.30169223049 1213.27014848705 0;
    241.249155317218 1215.27386399805 0;
    241.191718008842 1217.27736136261 0;
    241.129474164169 1219.28063100233 0;
    241.062518172194 1221.28366439602 0;
    240.990944546844 1223.28645381216 0;
    240.914847792343 1225.28899216985 0;
    240.834322400753 1227.2912730255 0;
    240.749462849655 1229.29329055949 0;
    240.660363596383 1231.29503964001 0;
    240.567118910795 1233.29651742434 0;
    240.469821058228 1235.29772155544 0;
    240.368560389226 1237.29864844005 0;
    240.263427150702 1239.29929493769 0;
    240.154511566445 1241.29965842947 0;
    240.041903835785 1243.29973680586 0;
    239.925694132368 1245.29952845454 0;
    239.805970777817 1247.29906187713 0;
    239.682783317903 1249.29845280426 0;
    239.556054646241 1251.29772003643 0;
    239.425676571596 1253.29685024442 0;
    239.291540937172 1255.29582950607 0;
    239.153539623986 1257.29464328867 0;
    239.011564554416 1259.29327643149 0;
    238.865507699623 1261.29171307887 0;
    238.715261218821 1263.28993563304 0;
    238.560718592592 1265.28792591634 0;
    238.401774536551 1267.28566624389 0;
    238.238323878113 1269.28313828662 0;
    238.070261510176 1271.28032300161 0;
    237.89748239578 1273.27720061559 0;
    237.719881572976 1275.27375060839 0;
    237.537354174892 1277.2699515367 0;
    237.349795645406 1279.26578071519 0;
    237.157102188144 1281.2612152119 0;
    236.959170265606 1283.25623146659 0;
    236.755896442042 1285.25080509879 0;
    236.547177389478 1287.24491089178 0;
    236.332909893952 1289.2385227767 0;
    236.112990861083 1291.23161382453 0;
    235.887317294509 1293.22415639548 0;
    235.655786127461 1295.21612192592 0;
    235.576622168803 1295.87990819612 0];
speed = 10;
trajectory(car2, waypoints, speed);

% Output road centers
roadCenters = curvedRoad.RoadCenters;
end