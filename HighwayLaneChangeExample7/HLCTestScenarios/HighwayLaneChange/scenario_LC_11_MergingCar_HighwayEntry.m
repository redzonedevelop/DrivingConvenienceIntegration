function [scenario, egoVehicle, roadCenters] = scenario_LC_11_MergingCar_HighwayEntry()
% scenario_LC_11_MergingCar_HighwayEntry creates a scenario that is
% compatible with HighwayLaneChangeTestBench.slx. This test scenario is on
% a highway road with an entry road. There are three vehicles in the
% scenario. One of the vehicle is merging into the ego lane from the
% highway entry road segment.
%
% This scenario is created in Driving Scenario Designer and exported as a
% MATLAB function.

%   Copyright 2020-2021 The MathWorks, Inc.

% Construct a drivingScenario object.
scenario = drivingScenario('StopTime', 19, ...
    'SampleTime', 0.1);

% Add all road segments
roadCenters = [57.03213 -1223.454 0;
    52.57648 -1138.823 0;
    40.3209 -862.7384 0;
    35.85877 -764.1326 0;
    35.85681 -746.0532 0;
    35.85499 -728.8004 0;
    30.29402 -607.1907 0;
    19.17013 -382.0432 0;
    10.27032 -189.7685 0;
    -0.8400961 33.73419 0;
    -8.611945 198.8942 0;
    -9.719377 217.7933 0;
    -10.8255 271.2052 0;
    -13.04712 353.3721 0;
    -13.04578 378.8487 0;
    -11.933 458.5497 0;
    -6.362575 612.2073 0;
    1.432155 809.4135 0;
    6.999424 951.5686 0;
    9.243676 1081.396 0;
    9.251104 1128.23 0;
    13.70308 1192.323 0;
    14.8248 1217.799 0;
    15.93671 1239.983 0;
    22.61518 1304.896 0;
    24.83646 1332.831 0;
    30.40468 1382.136 0;
    41.52869 1461.015 0;
    55.98726 1541.539 0;
    77.11896 1645.884 0;
    106.0297 1761.735 0;
    154.9476 1930.99 0;
    159.3932 1946.603 0;
    239.4571 2224.305 0;
    243.9036 2240.736 0;
    258.3598 2286.745 0;
    268.3695 2316.322 0;
    278.3788 2344.253 0;
    289.4956 2370.544 0;
    303.9469 2400.119 0;
    328.3948 2446.123 0;
    346.1797 2475.697 0;
    359.5206 2497.056 0;
    389.5271 2541.411 0;
    416.2059 2575.092 0;
    442.8747 2606.308 0;
    472.8772 2638.335 0;
    501.7699 2665.438 0;
    526.2196 2687.618 0;
    580.6681 2731.142 0;
    619.5516 2757.421 0;
    661.778 2784.517 0;
    671.7803 2790.263 0;
    679.5565 2794.365 0;
    695.1094 2803.401 0;
    710.6623 2812.43 0;
    722.8905 2819.821 0;
    763.9982 2842.806 0;
    811.7743 2869.899 0;
    837.3296 2884.681 0;
    1113.996 3042.304 0;
    1528.442 3284.472 0;
    1556.225 3300.888 0;
    1585.115 3317.304 0;
    1672.895 3368.196 0;
    1732.902 3402.671 0;
    1792.901 3438.785 0;
    1849.568 3479.01 0;
    1896.243 3513.49 0;
    1899.577 3515.953 0;
    1935.143 3548.793 0;
    1956.261 3567.675 0;
    2005.159 3616.943 0;
    2049.618 3667.844 0;
    2090.753 3720.399 0;
    2128.548 3774.594 0;
    2163.01 3830.435 0;
    2210.833 3917.479 0;
    2347.608 4169.582 0;
    2418.777 4301.786 0;
    2462.151 4381.432 0;
    2468.824 4392.107 0;
    2494.402 4436.45 0;
    2513.306 4470.112 0;
    2546.677 4529.232 0];
laneSpecification = lanespec(3);
highwayRoad = road(scenario, roadCenters, 'Lanes', laneSpecification);

roadCenters1 = [14.8248 1217.799 0;
    30.3828 1267.096 0;
    37.05624 1304.073 0;
    41.50236 1329.542 0;
    44.83818 1342.689 0;
    50.39115 1361.587 0;
    68.17482 1407.598 0;
    70.40112 1412.529 0;
    75.95327 1426.495 0;
    83.73007 1437.176 0;
    95.95853 1452.787 0];
laneSpecification = lanespec(2);
road(scenario, roadCenters1, 'Lanes', laneSpecification);

roadCenters2 = [555.0992 2680.21 0;
    562.8786 2692.528 0;
    579.5418 2708.134 0;
    596.2138 2722.094 0;
    628.4399 2748.375 0;
    651.7696 2763.158 0;
    705.1057 2794.355 0;
    745.106 2818.986 0;
    785.1054 2841.158 0;
    808.437 2860.046 0;
    837.3296 2884.681 0];
laneSpecification = lanespec(2);
road(scenario, roadCenters2, 'Lanes', laneSpecification);

roadCenters3 = [1500.17 3259.01 0;
    1479.17 3246.45 0;
    1468.21 3240.05 0;
    1458.15 3234 0;
    1432.881 3217.151 0;
    1406.215 3198.268 0;
    1395.103 3188.419 0;
    1385.099 3181.028 0;
    1365.1 3162.142 0;
    1347.317 3142.429 0;
    1331.758 3121.901 0;
    1317.308 3101.367 0;
    1305.073 3080.838 0;
    1301.737 3075.082 0;
    1295.065 3061.12 0;
    1286.173 3041.409 0;
    1275.051 3006.908 0;
    1269.484 2988.834 0;
    1262.819 2969.941 0;
    1259.482 2960.908 0;
    1252.81 2949.411 0;
    1245.031 2939.553 0;
    1236.136 2931.342 0;
    1227.25 2924.776 0;
    1219.473 2919.029 0;
    1191.692 2903.43 0];
laneSpecification = lanespec(1);
road(scenario, roadCenters3, 'Lanes', laneSpecification);

% Add the ego vehicle
egoVehicle = vehicle(scenario, ...
    'ClassID', 1, ...
    'Position', [1354.6 3177.2 0], ...
    'FrontOverhang', 0.9);
waypoints = [1354.6 3177.2 0;
    1393.8 3200.41 0.01;
    1404.32 3206.67 0.01;
    1416.4 3213.9 0;
    1454.6 3238.4 0;
    1478.1 3253.7 0;
    1510.6 3273.7 0;
    1527.07 3283.65 0.01;
    1551.3 3297.9 0;
    1623.93 3339.49 0.01;
    1666.4 3364.3 0];
speed = 18;
trajectory(egoVehicle, waypoints, speed);

% Add the non-ego actors
car1 = vehicle(scenario, ...
    'ClassID', 1, ...
    'Position', [1400.86 3193.4 0.01], ...
    'FrontOverhang', 0.9);
waypoints = [1400.86 3193.4 0.01;
    1412.15 3203.15 0.01;
    1422.56 3210.36 0.01;
    1434.17 3217.99 0.01;
    1477.3 3247.8 0;
    1498.7 3262.5 0;
    1519.9 3275.26 0.01;
    1551.1 3293.8 0;
    1593.67 3318.05 0.01;
    1614.66 3330.17 0.01;
    1699.06 3379.21 0.01;
    1751.93 3409.41 0.01;
    1773.31 3422.1 0.01;
    1814.15 3448.79 0.01;
    1855.08 3478.59 0.01];
speed = 15;
trajectory(car1, waypoints, speed);

car2 = vehicle(scenario, ...
    'ClassID', 1, ...
    'Position', [1338.3 3172.1 0], ...
    'FrontOverhang', 0.9);
waypoints = [1338.3 3172.1 0;
    1433.98 3228.32 0.01;
    1476.43 3253.42 0.01;
    1497.08 3265.82 0.01;
    1570.59 3308.96 0.01;
    1625.12 3340.24 0.01;
    1655.61 3358.13 0.01;
    1750.16 3412.57 0.01;
    1801.77 3444.57 0.01;
    1846.88 3477.04 0.01;
    1890.6 3509.2 0;
    1919.7 3533.4 0;
    1946.2 3558.6 0;
    1982.3 3592.2 0;
    2023.7 3637.5 0;
    2064.5 3685.8 0;
    2089.1 3717.6 0];
speed = 30;
trajectory(car2, waypoints, speed);

% Output road centers
roadCenters = highwayRoad.RoadCenters;
end